<!DOCTYPE html>
<html>
<head>
    <title>French Word Slideshow Generator</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f8f9fa;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        #container {
            width: 80%;
            max-width: 800px;
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        #input-area {
            margin-bottom: 20px;
        }

        #word-list {
            height: 200px; /* Fixed height for the textarea */
        }

        #slideshow-container {
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            height: 300px; /* Fixed height for consistent layout */
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 2em;
            color: white;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        .slide.active {
            opacity: 1;
        }

        /* Gender-based color schemes */
        .slide.masculine {
            background: linear-gradient(to bottom, #64b5f6, #2196f3); /* Blueish */
        }

        .slide.feminine {
            background: linear-gradient(to bottom, #f48fb1, #e91e63); /* Pinkish */
        }

        .slide.neutral {
            background: linear-gradient(to bottom, #a1887f, #795548); /* Brownish */
        }

        #navigation-buttons {
            text-align: center;
            margin-top: 10px;
        }

        #error-message {
            color: red;
            margin-top: 10px;
            text-align: center;
        }

        #edit-button {
            margin-top: 10px;
        }
    </style>
</head>
<body>

<div id="container">
    <h1>French Word Slideshow Generator</h1>

    <div id="input-area">
        <label for="word-list">Enter English word, gender prefix, and French noun (one per line):</label>
        <textarea id="word-list" class="form-control" rows="5"
                  placeholder="Example:
dog le chien
table la table
man un homme
woman une femme"></textarea>
    </div>

    <button id="generate-button" class="btn btn-primary btn-block">Generate Slideshow</button>

    <div id="slideshow-container" style="display: none;">
        <!-- Slides will be dynamically added here -->
    </div>

    <div id="navigation-buttons" style="display: none;">
        <button id="prev-button" class="btn btn-secondary">Previous</button>
        <button id="next-button" class="btn btn-secondary">Next</button>
        <button id="edit-button" class="btn btn-secondary">Edit List</button>
    </div>

    <div id="error-message">
        <!-- Error messages will be displayed here -->
    </div>
</div>

<script>
    $(document).ready(function () {
        const inputArea = $("#input-area");
        const wordListTextarea = $("#word-list");
        const generateButton = $("#generate-button");
        const slideshowContainer = $("#slideshow-container");
        const navigationButtons = $("#navigation-buttons");
        const prevButton = $("#prev-button");
        const nextButton = $("#next-button");
        const editButton = $("#edit-button");
        const errorMessage = $("#error-message");
        let slides = [];
        let currentSlideIndex = 0;

        function generateSlideshow(wordList) {
            slideshowContainer.empty(); // Clear any existing slides
            slides = []; // Reset the slides array
            currentSlideIndex = 0;
            errorMessage.text("");  // Clear any previous errors

            const lines = wordList.split('\n');
            let validWordsCount = 0;

            lines.forEach(line => {
                line = line.trim();
                if (!line) return; // Skip empty lines

                const parts = line.split(' ');
                if (parts.length < 3) {
                    console.warn("Invalid line format: ", line);
                    errorMessage.text("Invalid line format. Please use 'english prefix french'. See console for more.");
                    return;
                }

                const englishWord = parts[0].trim();
                const prefix = parts[1].trim().toLowerCase();
                const frenchWord = parts.slice(2).join(' ').trim();  // Handle multi-word French nouns

                const validPrefixes = ["le", "la", "un", "une"];
                if (!validPrefixes.includes(prefix)) {
                    console.warn("Invalid prefix: ", prefix, " in line: ", line);
                    errorMessage.text("Invalid gender prefix.  Valid prefixes are: le, la, un, une. See console for more.");
                    return;
                }

                let genderClass = 'neutral';
                if (["le", "un"].includes(prefix)) {
                    genderClass = 'masculine';
                } else if (["la", "une"].includes(prefix)) {
                    genderClass = 'feminine';
                }

                const definiteArticle = (prefix === "un" || prefix === "une") ? "" : prefix;
                const possessiveArticle = (genderClass === 'masculine') ? "son" : "ta";
                const wordWithDefiniteArticle = definiteArticle + " " + frenchWord;
                const wordWithOne = (genderClass === 'masculine') ? "un " + frenchWord : "une " + frenchWord;
                const wordWithPossessive = possessiveArticle + " " + frenchWord;

                const slideContent = `
                    <p><b>English:</b> ${englishWord}</p>
                    <p>Un/Une: ${wordWithOne}</p>
                    <p>Le/La: ${wordWithDefiniteArticle}</p>
                    <p>Ta/Sa: ${wordWithPossessive}</p>
                `;

                const slide = $(`<div class="slide ${genderClass}">${slideContent}</div>`);
                slideshowContainer.append(slide);
                slides.push(slide);
                validWordsCount++;
            });

            if (validWordsCount === 0) {
                errorMessage.text("No valid words found in the input.");
                return;
            }

            showSlide(0); // Show the first slide
            inputArea.hide();
            generateButton.hide();
            slideshowContainer.show();
            navigationButtons.show();
        }

        function showSlide(index) {
            if (index < 0) {
                currentSlideIndex = slides.length - 1;
            } else if (index >= slides.length) {
                currentSlideIndex = 0;
            } else {
                currentSlideIndex = index;
            }

            $(".slide").removeClass("active");
            slides[currentSlideIndex].addClass("active");
        }

        generateButton.click(function () {
            const wordList = wordListTextarea.val();
            generateSlideshow(wordList);
        });

        prevButton.click(function () {
            showSlide(currentSlideIndex - 1);
        });

        nextButton.click(function () {
            showSlide(currentSlideIndex + 1);
        });

        editButton.click(function () {
            slideshowContainer.hide();
            navigationButtons.hide();
            inputArea.show();
            generateButton.show();
        });
    });
</script>

</body>
</html>